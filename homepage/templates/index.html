<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- for chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
  </head>

  <nav class="navbar navbar-light bg-light">
    <div class="container-fluid">
      <h1> Premarket Predictions </h1>

 
      <form method="post" class="d-flex">{% csrf_token %}
        {% comment %} Start Date {% endcomment %}
        {% comment %} <input class="form-control me-2" type="date" name="start_date" placeholder="Start Date" aria-label="Search"> {% endcomment %}
        {% comment %} End Date {% endcomment %}
        {% comment %} <input class="form-control me-2" type="date" name="end_date" placeholder="End Date" aria-label="Search"> {% endcomment %}

        <input class="form-control me-2" type="date" name="compare_date" placeholder="Day you want to find" aria-label="Search">

        <input class="form-control me-2" type="search" name="search" placeholder="Search for symbols" aria-label="Search">
        
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
    </div>
  </nav>
  {% comment %} <title>Hello, world!</title> {% endcomment %}
  {% if hidden == "no" %}
  <div class="container-fluid">
    {% else %}
  <div style="display: none;">
{% endif %}
  <div class="card">
    <div class="card-body">
      <canvas id="mainChart" style="position: relative; height:40vh; width:80vw"></canvas>
      <script>
        var data = {{ mainChartJSON | safe }}
        var ctx = document.getElementById("mainChart").getContext('2d');
        var myChart = new Chart(ctx, data);
    </script>
    <br>
    <br>
    <div class="container">
      <div class="row">
        <div class="col">
          <h2> Company Profile </h2>
          <br>

          <p> <b>Analysis Date:</b> {{ date_analyze }} <b>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Best Fit Date:</b> {{ date_best_fit }}</p>
          {% for s in stock %}
  
          <p> <b>Ticker:</b> {{ s.ticker }} </p>
          <p> <b>Sector:</b> {{ s.sector }} </p>
          <p> <b>Industry:</b> {{ s.industry }} </p>
          <p> <b>Age:</b> {{ s.age }} </p>
          <p> <b>Description:</b> {{ s.description }} </p>
          <p> <b>Total Employees:</b> {{ s.total_employees }} </p>
          <p> <b>Website:</b> {{ s.website }} </p>
          
      
            {% endfor %}
        </div>
        <div class="col">
          <h2> Plot Statistics </h2>
        <br>

        <p> <b>Analysis Date Slope:</b> {{ analysis_slope }} </p>
        <p> <b>Best Fit Date Slope:</b> {{ lbf_slope }} </p>

        <p> <b>Analysis Date MSE:</b> {{ analysis_MSE }} </p>
        <p> <b>Best Fit Date MSE:</b> {{ lbf_MSE }} </p>
        <br>

        <canvas id="epsChart" style="position: relative; height:5vh; width:5vw"></canvas>
          <script>
            var data = {{ EPSChartJSON | safe }}
            var ctx = document.getElementById("epsChart").getContext('2d');
            var myChart = new Chart(ctx, data);
          </script>
        </div>
      </div>
    </div>
    {% comment %} <p> <b>Analysis Date:</b> {{ date_analyze }} <b>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Best Fit Date:</b> {{ date_best_fit }}</p> {% endcomment %}


    </div>
  </div>
  
  <div class="container">
    <div class="row">
      <div class="col">
        Column
        <img src="pic_trulli.jpg" alt="Italian Trulli">
      </div>
      <div class="col">
        Column
        <img src="pic_trulli.jpg" alt="Italian Trulli">
      </div>
      <div class="col">
        Column
        <img src="pic_trulli.jpg" alt="Italian Trulli">
      </div>
    </div>
  </div>
  {% comment %} {% for s in stock %}

{{ s.ticker }}
{{ s.description }}

{% endfor %} {% endcomment %}

   {% comment %} <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script> {% endcomment %}
<body>
{% comment %} <canvas id="myChart" style="width:100%;max-width:600px"></canvas> {% endcomment %}

{% comment %} <script>
var xValues = [50,60,70,80,90,100,110,120,130,140,150];
var yValues = [7,8,8,9,9,9,10,11,14,14,15];

new Chart("myChart", {
  type: "line",
  data: {
    labels: xValues,
    datasets: [{
      fill: false,
      lineTension: 0,
      backgroundColor: "rgba(0,0,255,1.0)",
      borderColor: "rgba(0,0,255,0.1)",
      data: yValues
    }]
  },
  options: {
    legend: {display: false},
    scales: {
      yAxes: [{ticks: {min: 6, max:16}}],
    }
  }
});
</script> {% endcomment %}

</body>
</html>